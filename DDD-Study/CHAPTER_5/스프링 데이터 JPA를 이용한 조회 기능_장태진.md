스프링 데이터 JPA 조회
==

CQRS : Command, Query 분리 패턴

명령(Command) 모델은 상태를 변경하는 기능을 구현할 때 사용.<br>
e.g) 회원 가입, 암호 변경, 주문 취소 같은 상태(데이터 변경)<br>


조회(Query) 모델은 데이터를 조회하는 기능을 구현할 때 사용.<br>
e.g) 주문 목록, 주문 상세 처럼 데이터를 보여주는 기능


엔티티, 애그리거트, 리포지터리는 명령 모델에 주로 사용됨.
-> 도메인 모델로써 상태 변경에 주로 사용.

정렬, 페이징, 검색 조건 지정은 조회에 주로 사용됨. 

검색을 위한 스펙
--

검색 조건을 다양하게 조합해야 할 때 사용할 수 있는 것이 스펙(Specification).
* 스펙 : 애그리거트가 특정 조건을 충족하는지 검사할 때 사용하는 인터페이스
````java
public interface Specification<T> {
    // agg는 검사 대상이 되는 객체
    public boolean isSatisfiedBy(T agg);
}
````
스펙을 리포지터리에 사용하면 agg는 애그리거트 루트가 되고, DAO에 사용하면 검색결과로 리턴할 데이터 객체가 된다.

> 실제 스펙은 사용하는 기술에 맞춰 구현해야 한다.

JPA 정적 메타 모델 : @StaticMetamodel 애너테이션을 이용 만듬.<br>
-> 대상 모델의 각 프로퍼티와 동일한 이름을 갖는 정적 필드를 정의하고, 이 정적 필드는 프로퍼티에 대한 메타 모델로서 <br>
프로퍼티 타입에 따라 SingularAttribute, ListAttribute 등의 타입을 사용해서 정의함.
Criteria를 사용할 때 쓰면됨. 표현식은 모델클래스_ 을 붙인 이름을 갖는다.




